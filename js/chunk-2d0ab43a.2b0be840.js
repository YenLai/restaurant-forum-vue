(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"balbum py-5 bg-light"},[r("div",{staticClass:"container"},[r("div",{staticClass:"card mb-3"},[r("UserProfileCard",{attrs:{profile:t.profile},on:{"after-add-followship":t.addFollowship,"after-del-followship":t.deleteFollowship}})],1),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{followings:t.profile.Followings}}),r("br"),r("UserFollowersCard",{attrs:{followers:t.profile.Followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{commetRestaurants:t.profile.myComments}}),r("br"),r("UserFavoritedRestaurantsCard",{attrs:{FavoritedRestaurants:t.profile.Favorited}})],1)])])])},a=[],i=(r("96cf"),r("1da1")),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{staticClass:"img-thumbnail",attrs:{src:t.profile._user.image}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(t._s(t.profile._user.name))]),r("p",{staticClass:"card-text"},[t._v(t._s(t.profile._user.email))]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[t._v(t._s(t.profile.myComments.length))]),t._v(" 已評論餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.profile.Favorited.length))]),t._v(" 收藏的餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.profile.Followings.length))]),t._v(" followings (追蹤者) ")]),r("li",[r("strong",[t._v(t._s(t.profile.Followers.length))]),t._v(" followers (追隨者) ")])]),t.profile.isCurrentUser?[r("router-link",{staticClass:"btn btn-primary mr-3",attrs:{to:{name:"user-edit",params:{id:t.profile._user.id}}}},[t._v("Edit")])]:t._e(),t.profile.isCurrentUser?t._e():r("form",{staticStyle:{display:"contents"},attrs:{action:"/following/3?_method=DELETE",method:"POST"}},[t.profile.isFollowing?r("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleDelFollowship(t.profile._user.id)}}},[t._v("取消追蹤")]):r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleAddFollowship(t.profile._user.id)}}},[t._v("追蹤")])])],2)])])},n=[],o={props:{profile:{type:Object,require:!0}},methods:{handleAddFollowship:function(t){this.$emit("after-add-followship",t)},handleDelFollowship:function(t){this.$emit("after-del-followship",t)}}},c=o,d=r("2877"),u=Object(d["a"])(c,l,n,!1,null,null,null),p=u.exports,f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followings.length))]),t._v(" followings (追蹤者) ")]),r("div",{staticClass:"card-body"},[t._l(t.followings,(function(t){return[r("router-link",{key:t.id,class:"mr-1",attrs:{to:{path:"/users/"+t.id}}},[r("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])]}))],2)])},h=[],v={props:{followings:{type:Array,require:!0}}},m=v,w=Object(d["a"])(m,f,h,!1,null,null,null),g=w.exports,_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followers.length))]),t._v(" followers (追隨者) ")]),r("div",{staticClass:"card-body"},[t._l(t.followers,(function(t){return[r("router-link",{key:t.id,attrs:{to:{name:"user-profile",params:{id:t.id}}}},[r("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])]}))],2)])},C=[],b={props:{followers:{type:Array,require:!0}}},F=b,y=Object(d["a"])(F,_,C,!1,null,null,null),k=y.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.commetRestaurants.length))]),t._v(" 已評論餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.commetRestaurants,(function(t){return r("router-link",{key:t.id,class:"ml-1",attrs:{to:{name:"restaurant",params:{id:t.id}}}},[r("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},R=[],U={props:{commetRestaurants:{type:Array,require:!0}}},E=U,O=Object(d["a"])(E,x,R,!1,null,null,null),j=O.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.FavoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.FavoritedRestaurants,(function(t){return r("router-link",{key:t.id,class:"ml-1",attrs:{to:{name:"restaurant",params:{id:t.id}}}},[r("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},D=[],A={props:{FavoritedRestaurants:{type:Array,require:!0}}},q=A,P=Object(d["a"])(q,$,D,!1,null,null,null),T=P.exports,J=r("4cce"),S=r("2fa3"),K={components:{UserProfileCard:p,UserFollowingsCard:g,UserFollowersCard:k,UserCommentsCard:j,UserFavoritedRestaurantsCard:T},data:function(){return{profile:{}}},beforeRouteUpdate:function(t,e,r){this.fetchData(t.params.id),r()},created:function(){var t=this.$route.params.id;this.fetchData(t)},watch:{profile:function(){var t=this.$route.params.id;this.fetchData(t)}},methods:{fetchData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,J["a"].getUser(t);case 3:if(s=r.sent,a=s.statusText,i=s.data,"OK"===a){r.next=7;break}throw new Error("無法取得使用者資料，請稍後再試");case 7:e.profile=i,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),S["a"].fire({icon:"error",title:r.t0});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},addFollowship:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,J["a"].addFollowship(t);case 3:if(s=r.sent,"success"===s.data.status){r.next=6;break}throw new Error("無法追蹤，請稍後再試");case 6:e.profile.isFollowing=!0,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),S["a"].fire({icon:"error",title:r.t0});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},deleteFollowship:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,J["a"].deleteFollowship(t);case 3:if(s=r.sent,"success"===s.data.status){r.next=6;break}throw new Error("無法取消追蹤，請稍後再試");case 6:e.profile.isFollowing=!1,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),S["a"].fire({icon:"error",title:r.t0});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()}}},L=K,z=Object(d["a"])(L,s,a,!1,null,null,null);e["default"]=z.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.2b0be840.js.map